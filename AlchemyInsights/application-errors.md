---
title: Грешки в приложението
ms.author: v-aiyengar
author: AshaIyengar21
manager: dansimp
ms.date: 01/25/2021
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Normal
ms.collection: Adm_O365
ms.custom:
- "9004342"
- "7841"
ms.openlocfilehash: ce4c89da79112726ed4fb25527edc8d082bd37f239595b9eab7279abeeecfd7e
ms.sourcegitcommit: b5f7da89a650d2915dc652449623c78be6247175
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 08/05/2021
ms.locfileid: "53931438"
---
# <a name="application-errors"></a>Грешки в приложението

Търсите информация за кодовете на **грешки на AADSTS,** които се връщат от услугата за маркери за защита Azure Active Directory (Azure AD) (STS)? Прочетете [кодовете за грешки за удостоверяване](https://docs.microsoft.com/azure/active-directory/develop/reference-aadsts-error-codes) и удостоверяване на Azure AD, за да намерите описания, корекции и някои предложени заобиколни решения на AADSTS.

Грешките при удостоверяване могат да бъдат резултат от няколко различни проблема, повечето от които генерират грешка 401 или 403. Например всички по-долу могат да доведат до грешки при удостоверяване:

- Неправилни [потоци на придобиване на маркери за достъп](https://docs.microsoft.com/azure/active-directory/develop/reference-aadsts-error-codes) 
- Неправилно конфигурирани [обхвати на разрешения](https://docs.microsoft.com/azure/active-directory/develop/active-directory-v2-scopes) 
- Липса на [съгласие](https://docs.microsoft.com/azure/active-directory/develop/active-directory-devhowto-multi-tenant-overview#understanding-user-and-admin-consent)

За да отстраните често срещани грешки при удостоверяване, изпробвайте стъпките, предоставени по-долу, които най-добре съвпадат с грешката, която получавате. Възможно е да има повече от един.

**401 Грешка от липса на удостоверяване: Валиден ли е вашият маркер?**

Уверете се, че вашето приложение представя валиден маркер за достъп до Microsoft Graph като част от искането. Тази грешка често означава, че маркерът за достъп може да липсва в заглавката на искането за удостоверяване на HTTP или че маркерът е невалиден или с изтекъл срок. Настоятелно ви препоръчваме да използвате [библиотеката за удостоверяване на Microsoft (MSAL)](https://docs.microsoft.com/azure/active-directory/develop/msal-overview) за придобиване на маркер за достъп. Освен това тази грешка може да възникне, ако се опитате да използвате маркер за делегиран достъп, предоставен на личен акаунт в Microsoft, за достъп до API, който поддържа само работни или учебни акаунти (организационни акаунти).

**403 Грешка от забрана: Избрали ли сте правилния набор разрешения?**

Уверете се, че сте поискали правилния набор от разрешения въз основа на API на Microsoft Graph вашите повиквания към приложения. Препоръчваните най-малко привилегировани разрешения се предоставят във всички теми на Graph за справка за API на Microsoft. Освен това тези разрешения трябва да бъдат дадени на приложението от потребител или администратор. Даване на разрешения обикновено се извършва чрез страница за съгласие или чрез предоставяне на разрешения с помощта на острието за регистрация на приложения на Azure Portal. От блейда на **Настройки** за приложението щракнете върху **Задължителни разрешения** и след това щракнете върху **Даване на разрешения**.

- [Разрешения на Microsoft Graph](https://docs.microsoft.com/graph/permissions-reference) 
- [Разбиране на разрешенията и съгласието за Azure AD](https://docs.microsoft.com/azure/active-directory/develop/v2-permissions-and-consent) 

**403 Грешка от забрана: Вашето приложение придобило ли е маркер, който да съответства на избраните разрешения?**

Уверете се, че типът на исканите или дадените разрешения съответства на типа маркер за достъп, който вашето приложение придобива. Може да поискате и да дадете разрешения на приложение, но да използвате маркери за делегиран интерактивен кодов поток вместо маркери за поток на клиентски идентификационни данни или да поискате и дадете делегирани разрешения, но да използвате маркери за потока на клиентски идентификационни данни вместо маркери за делегиран кодов поток.

- [Получаване на достъп от името на потребители и делегирани разрешения](https://docs.microsoft.com/graph/auth_v2_user) 
- [Azure AD v2.0 – поток на код за удостоверяване на OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) 
- [Получаване на достъп без потребител (фиктивна услуга) и разрешения за приложения](https://docs.microsoft.com/graph/auth_v2_service) 
- [Azure AD v2.0 – поток за идентификационни данни на клиент на OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) 

**403 Грешка от забрана: Смяна на парола**

В момента няма разрешения за фиктивни разрешения "от услуга за услуга" за разрешения на приложението, които да позволяват смяна на потребителски пароли. Тези API се поддържат само с помощта на интерактивни делегирани потоци код с влязъл администратор.

- [Разрешения на Microsoft Graph](https://docs.microsoft.com/graph/permissions-reference)

**403 Забранено: Потребителят има ли достъп и дали е лицензиран?**

За делегираните потоци от кодове Microsoft Graph оценява дали искането е разрешено въз основа на разрешенията, предоставени на приложението, и разрешенията, които потребителят, който е в профила си. По принцип тази грешка показва, че потребителят не е достатъчно привилегирован, за да изпълни искането, или потребителят не е лицензиран за данните, до които се осъществява достъп. Само потребители с необходимите разрешения или лицензи могат успешно да направят искането.

**403 Забранено: Избрали ли сте правилния API на ресурс?**

Api services като Microsoft Graph проверете дали звуковата заявка (аудитория) в маркера за получен достъп съответства на стойността, която очаква за себе си, а ако не, води до 403 забранена грешка. Често срещано объркване, което води до тази грешка, е опитът да се използва маркер, придобит за API на Azure ADGraph, API на Outlook или API на SharePoint/OneDrive, за извикване на Microsoft Graph (или обратно). Уверете се, че ресурсът (или обхватът), за който вашето приложение придобива маркер, съответства на API, който приложението извиква.

**400 "Лоша заявка" или 403 "Забранено": Спазва ли потребителят правилата за условен достъп на организацията си?**

Въз основа на правилата за со на организацията потребителят, който има достъп до ресурсите на Microsoft Graph чрез вашето приложение, може да бъде предизвикан от допълнителни данни, които не присъстват в маркера за достъп, който първоначално е придобил вашето приложение. В този случай вашето приложение получава грешка 400 с *задължително_взаимодействие* по време на получаването на маркер за достъп или грешка 403 с *недостатъчни_претенции* при извикване на Microsoft Graph. И в двата случая отговорът на грешката съдържа допълнителна информация, която може да бъде представена на крайната точка, за да се оспори потребителят за допълнителна информация (например многофакторно удостоверяване или записване на устройство).

- [Справяне с предизвикателствата при условен достъп с помощта на MSAL ](https://docs.microsoft.com/azure/active-directory/develop/msal-handling-exceptions#conditional-access-and-claims-challenges)
- [Указания за разработчици за условен достъп до Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/conditional-access-dev-guide)
