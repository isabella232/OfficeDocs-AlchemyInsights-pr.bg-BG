---
title: Отстраняване на неизправности при протоколи OAuth 2,0 и OpenID Connect
ms.author: v-smandalika
author: v-smandalika
manager: dansimp
ms.date: 03/17/2021
audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Priority
ms.collection: Adm_O365
ms.custom:
- "9776"
- "9004342"
ms.openlocfilehash: d2f14d4d16bea890b564cdb9bd9ac3875c28d115
ms.sourcegitcommit: c08bed4071baa3bb5879496df3ed44fb828c8367
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 03/19/2021
ms.locfileid: "51034958"
---
# <a name="troubleshoot-oauth-20-and-openid-connect-protocols"></a><span data-ttu-id="787e0-102">Отстраняване на неизправности при протоколи OAuth 2,0 и OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="787e0-102">Troubleshoot OAuth 2.0 and OpenID Connect protocols</span></span>

<span data-ttu-id="787e0-103">За да отстраните проблеми с 2,0 и OpenID свързване на OAuth, изпълнете следните Препоръчителни стъпки:</span><span class="sxs-lookup"><span data-stu-id="787e0-103">To resolve OAuth 2.0 and OpenID Connect issues, perform the following recommended steps:</span></span>

<span data-ttu-id="787e0-104">Вижте следните статии, които са свързани с конфигурацията и отстраняването на неизправности OAuth 2,0 и протоколите за OpenID свързване:</span><span class="sxs-lookup"><span data-stu-id="787e0-104">Refer to the following articles that are related to configuration and troubleshooting OAuth 2.0 and OpenID Connect protocols:</span></span>

- <span data-ttu-id="787e0-105">[Microsoft Identity Platform и OAuth 2,0 код за удостоверяване](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) – тази статия описва как да програмирате директно спрямо **потока за даване на код (PKCE)** в приложението си, като използвате произволен език.</span><span class="sxs-lookup"><span data-stu-id="787e0-105">[Microsoft identity platform and OAuth 2.0 authorization code flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) - This article describes how to program directly against the **code grant (PKCE) flow** in your application, using any language.</span></span>
- <span data-ttu-id="787e0-106">[Платформата за самоличност на Microsoft и потокът на идентификационните данни за клиент на OAuth 2,0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) – тази статия описва как да програмирате директно към **потока идентификационни данни на клиента** във вашето приложение.</span><span class="sxs-lookup"><span data-stu-id="787e0-106">[Microsoft identity platform and the OAuth 2.0 client credentials flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) - This article describes how to program directly against the **client credentials flow** in your application.</span></span>
- <span data-ttu-id="787e0-107">[Платформа за самоличност на Microsoft и идентификационните данни за паролата на собственика на OAuth 2,0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth-ropc) – тази статия описва как да програмирате директно спрямо **потока ROPC** в приложението.</span><span class="sxs-lookup"><span data-stu-id="787e0-107">[Microsoft identity platform and OAuth 2.0 Resource Owner Password Credentials](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth-ropc) - This article describes how to program directly against the **ROPC flow** in your application.</span></span>
    - <span data-ttu-id="787e0-108">Платформата за самоличност на Microsoft поддържа само ROPC за клиенти на Azure AD, но не и за лични акаунти.</span><span class="sxs-lookup"><span data-stu-id="787e0-108">The Microsoft identity platform only supports ROPC for Azure AD tenants, and not for personal accounts.</span></span> <span data-ttu-id="787e0-109">Това означава, че трябва да използвате конкретна крайна точка за **клиента https://login.microsoftonline.com/{TenantId_or_Name}) (** или крайна точка на **организациите** .</span><span class="sxs-lookup"><span data-stu-id="787e0-109">This means that you must use a tenant-specific endpoint **(https://login.microsoftonline.com/{TenantId_or_Name})** or the **organizations** endpoint.</span></span>
    - <span data-ttu-id="787e0-110">Лични акаунти, които са поканени на клиент на Azure AD, не могат да използват ROPC.</span><span class="sxs-lookup"><span data-stu-id="787e0-110">Personal accounts that are invited to an Azure AD tenant can't use ROPC.</span></span>
    - <span data-ttu-id="787e0-111">Акаунтите, които нямат пароли, не могат да влизат в ROPC.</span><span class="sxs-lookup"><span data-stu-id="787e0-111">Accounts that don't have passwords can't sign in through ROPC.</span></span> <span data-ttu-id="787e0-112">За този сценарий ви препоръчваме вместо това да използвате различен поток за вашето приложение.</span><span class="sxs-lookup"><span data-stu-id="787e0-112">For this scenario, we recommend that you use a different flow for your app, instead.</span></span>
    - <span data-ttu-id="787e0-113">Ако потребителите трябва да използват [многофакторно удостоверяване (МВнР)](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks) , за да влязат в приложението, те ще бъдат блокирани.</span><span class="sxs-lookup"><span data-stu-id="787e0-113">If users need to use [multi-factor authentication (MFA)](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks) to log in to the application, they will be blocked.</span></span>
    - <span data-ttu-id="787e0-114">ROPC не се поддържа за сценарии със [хибридната федерация за самоличност](https://docs.microsoft.com/azure/active-directory/hybrid/whatis-fed) (НАПРИМЕР Azure ad и ADFS, използвани за удостоверяване на локални акаунти).</span><span class="sxs-lookup"><span data-stu-id="787e0-114">ROPC is not supported in [hybrid identity federation](https://docs.microsoft.com/azure/active-directory/hybrid/whatis-fed) scenarios (for example, Azure AD and ADFS used to authenticate on-premises accounts).</span></span> <span data-ttu-id="787e0-115">Ако потребителите се пренасочват изцяло към локален доставчик на самоличност, Azure AD не е в състояние да изпробва потребителското име и паролата си за този доставчик на самоличност.</span><span class="sxs-lookup"><span data-stu-id="787e0-115">If users are full-page redirected to an on-premises identity provider, Azure AD is not able to test the username and password against that identity provider.</span></span> <span data-ttu-id="787e0-116">[Транзитното удостоверяване](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-pta) е подкрепено с ROPC.</span><span class="sxs-lookup"><span data-stu-id="787e0-116">[Pass-through authentication](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-pta) is supported with ROPC, however.</span></span>
    - <span data-ttu-id="787e0-117">Изключение за един сценарий на хибридна федерация за самоличност би било следното: правилата за откриване на Начало на **AllowCloudPasswordValidation** с набор от " **истина** ", ще позволят на ROPC Flow да работи за външни потребители, когато локалната парола е синхронизирана с облак.</span><span class="sxs-lookup"><span data-stu-id="787e0-117">An exception to a hybrid identity federation scenario would be the following: Home Realm Discovery policy with **AllowCloudPasswordValidation** set to **TRUE** will enable ROPC flow to work for federated users when on-premises password is synced to cloud.</span></span> <span data-ttu-id="787e0-118">За повече информация вижте [Разрешаване на директно удостоверяване на ROPC на външни потребители за стари приложения](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-authentication-for-federated-users-portal#enable-direct-ropc-authentication-of-federated-users-for-legacy-applications)</span><span class="sxs-lookup"><span data-stu-id="787e0-118">For more information, see [Enable direct ROPC authentication of federated users for legacy applications](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-authentication-for-federated-users-portal#enable-direct-ropc-authentication-of-federated-users-for-legacy-applications)</span></span> 
- <span data-ttu-id="787e0-119">[Платформата за самоличност на Microsoft и OAuth 2,0 от името на потока](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow) -тази статия описва как да програмирате директно към **потока от името на (OBO)** в приложението.</span><span class="sxs-lookup"><span data-stu-id="787e0-119">[Microsoft identity platform and OAuth 2.0 On-Behalf-Of flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow) - This article describes how to program directly against the **on-behalf-of (OBO) flow** in your application.</span></span>
- <span data-ttu-id="787e0-120">[Microsoft Identity Platform и протокол за свързване с OpenID](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc) – тази статия показва как да внедрите протокола за свързване с OpenID, независимо от езика, и описва как да изпращате и получавате HTTP съобщения, без да използвате никоя библиотека с отворен код на Microsoft.</span><span class="sxs-lookup"><span data-stu-id="787e0-120">[Microsoft identity platform and OpenID Connect protocol](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc) - This article shows how to implement the OpenID Connect protocol independent of language, and describes how to send and receive HTTP messages without using any Microsoft open-source libraries.</span></span>

<span data-ttu-id="787e0-121">**Маркери за достъп**</span><span class="sxs-lookup"><span data-stu-id="787e0-121">**Access Tokens**</span></span>

<span data-ttu-id="787e0-122">[Маркери за достъп до платформата за самоличност на Microsoft](https://docs.microsoft.com/azure/active-directory/develop/access-tokens) – Научете как Вашият API може да провери и да използва претенциите в маркер на Access.</span><span class="sxs-lookup"><span data-stu-id="787e0-122">[Microsoft identity platform access tokens](https://docs.microsoft.com/azure/active-directory/develop/access-tokens) - Learn how your API can validate and use the claims inside an access token.</span></span> <span data-ttu-id="787e0-123">Цялата документация в тази статия, освен в случаите, когато е посочена, се отнася само за маркери, издадени за API, които сте регистрирали.</span><span class="sxs-lookup"><span data-stu-id="787e0-123">All documentation in this article, except where noted, applies only to tokens issued for APIs you've registered.</span></span> <span data-ttu-id="787e0-124">Той не се прилага за маркери, издадени за приложения, които са собственост на Microsoft, и тези маркери не могат да се използват за проверка как платформата за самоличност на Microsoft ще издаде маркери за създадения от вас API.</span><span class="sxs-lookup"><span data-stu-id="787e0-124">It does not apply to tokens issued for Microsoft-owned APIs, nor can those tokens be used to validate how the Microsoft identity platform will issue tokens for an API you create.</span></span>

<span data-ttu-id="787e0-125">**Конфигуриране на приложение**</span><span class="sxs-lookup"><span data-stu-id="787e0-125">**Application Configuration**</span></span>

<span data-ttu-id="787e0-126">Настройки за [пренасочване (URL адрес на отговора) ограничения и ограничения](https://docs.microsoft.com/azure/active-directory/develop/reply-url) – Научете как да конфигурирате своя URI за пренасочване (URL адрес за отговор).</span><span class="sxs-lookup"><span data-stu-id="787e0-126">[Redirect URI (reply URL) restrictions and limitations](https://docs.microsoft.com/azure/active-directory/develop/reply-url) - Learn how to configure your Redirect URI (reply URL).</span></span> <span data-ttu-id="787e0-127">URI за пренасочване или URL адресът на отговора е местоположението, където Сървърът за удостоверяване изпраща потребителя, след като приложението е успешно одобрено, и получи код за оторизация или маркер за достъп.</span><span class="sxs-lookup"><span data-stu-id="787e0-127">A redirect URI, or reply URL, is the location where the authorization server sends the user once the app has been successfully authorized and granted an authorization code or access token.</span></span> <span data-ttu-id="787e0-128">Сървърът за удостоверяване изпраща кода или маркера към URI адреса за пренасочване; така че е важно да регистрирате правилното местоположение като част от процеса на регистрация на приложения.</span><span class="sxs-lookup"><span data-stu-id="787e0-128">The authorization server sends the code or token to the redirect URI; so it's important you register the correct location as part of the app registration process.</span></span>

<span data-ttu-id="787e0-129">**Обезпечаване на приложения**</span><span class="sxs-lookup"><span data-stu-id="787e0-129">**Application Provisioning**</span></span>

<span data-ttu-id="787e0-130">[Урок: разработване и планиране на осигуряването за крайна точка на SCIM](https://docs.microsoft.com/azure/active-directory/app-provisioning/use-scim-to-provision-users-and-groups) – тази статия описва как да създадете крайна точка на SCIM и да се интегрирате с услугата за осигуряване на пад.</span><span class="sxs-lookup"><span data-stu-id="787e0-130">[Tutorial: Develop and plan provisioning for a SCIM endpoint](https://docs.microsoft.com/azure/active-directory/app-provisioning/use-scim-to-provision-users-and-groups) - This article describes how to build an SCIM endpoint and integrate with the AAD provisioning service.</span></span>


